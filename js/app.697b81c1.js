(function(t){function e(e){for(var n,r,i=e[0],l=e[1],c=e[2],d=0,h=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&h.push(s[r][0]),s[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);u&&u(e);while(h.length)h.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],n=!0,i=1;i<a.length;i++){var l=a[i];0!==s[l]&&(n=!1)}n&&(o.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},s={app:0},o=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=e,i=i.slice();for(var c=0;c<i.length;c++)e(i[c]);var u=l;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var n=a("85ec"),s=a.n(n);s.a},"19ae":function(t,e,a){"use strict";var n=a("75a6"),s=a.n(n);s.a},"1f06":function(t,e,a){"use strict";var n=a("3a5d"),s=a.n(n);s.a},"2c5c":function(t,e,a){"use strict";var n=a("7f5e"),s=a.n(n);s.a},"34c8":function(t,e,a){"use strict";var n=a("d679"),s=a.n(n);s.a},"360b":function(t,e,a){"use strict";var n=a("882d"),s=a.n(n);s.a},"3a5d":function(t,e,a){},4377:function(t,e,a){"use strict";var n=a("8fe5"),s=a.n(n);s.a},"48fa":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("div",{staticClass:"design-head"},[a("h1",{staticClass:"main-logo"},[t._v("Delivery")]),a("span",{staticClass:"user"},[t._v(" "+t._s(t.user.fullname)+" ")]),t.user.fullname?a("a",{staticClass:"user",attrs:{href:"#/login"},on:{click:t.onLogout}},[t._v("Выход")]):t._e()]),a(t.layout,{tag:"component",staticClass:"workspace",on:{userdata:t.onLogin}},[a("router-view")],1)],1)},o=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"centralizer"},[a("router-view")],1)},i=[],l={name:"LoginLayout"},c=l,u=(a("bd8d"),a("2877")),d=Object(u["a"])(c,r,i,!1,null,"300766b8",null),h=d.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("router-view")],1)},m=[],f=(a("d3b7"),a("96cf"),a("1da1")),v="https://dev.carbis.ru/dashapi/",g=function(){var t=Object(f["a"])(regeneratorRuntime.mark((function t(e,a){var n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=void 0,t.prev=1,!a){t.next=8;break}return t.next=5,fetch(v+e,{method:"POST",redirect:"manual",headers:{"Content-Type":"application/json",tphash:sessionStorage.getItem("tphash")||""},body:JSON.stringify(a)});case 5:n=t.sent,t.next=11;break;case 8:return t.next=10,fetch(v+e,{redirect:"manual",headers:{tphash:sessionStorage.getItem("tphash")||""}});case 10:n=t.sent;case 11:t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](1);case 16:if(n){t.next=18;break}throw"Нет соединения.";case 18:if(401!=n.status){t.next=21;break}return window.location.hash="#/login",t.abrupt("return",void 0);case 21:return t.next=23,n.json();case 23:if(s=t.sent,s.result){t.next=29;break}throw console.error("Response for "+e+": "+s.msg),s.msg;case 29:return t.abrupt("return",s);case 30:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e,a){return t.apply(this,arguments)}}(),b={name:"BasicLayout",mounted:function(){var t=this;g("getme").then((function(e){t.$emit("userdata",e.data)})).catch((function(){window.location.hash="#/login"}))}},w=b,y=Object(u["a"])(w,p,m,!1,null,"1fb6bd92",null),_=y.exports,x={data:function(){return{user:{}}},methods:{onLogin:function(t){this.user=t},onLogout:function(){this.user={},sessionStorage.removeItem("tphash")}},computed:{layout:function(){return(this.$route.meta.layout||"basic")+"-layout"}},components:{BasicLayout:_,LoginLayout:h},mounted:function(){console.log(this.layout)}},C=x,k=(a("034f"),Object(u["a"])(C,s,o,!1,null,null,null)),$=k.exports,E=a("8c4f"),P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"login-window",on:{submit:function(e){return e.preventDefault(),t.logmein(e)}}},[a("div",{staticClass:"inputcontainer"},[a("label",{attrs:{for:"login"}},[t._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.lg,expression:"lg"}],attrs:{type:"text",required:"",placeholder:"",id:"login"},domProps:{value:t.lg},on:{input:function(e){e.target.composing||(t.lg=e.target.value)}}})]),a("div",{staticClass:"inputcontainer"},[a("label",{attrs:{for:"password"}},[t._v("Пароль")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.pwd,expression:"pwd"}],attrs:{type:"password",required:"",placeholder:"",id:"password"},domProps:{value:t.pwd},on:{input:function(e){e.target.composing||(t.pwd=e.target.value)}}})]),a("span",{staticClass:"errormessage"},[t._v(" "+t._s(t.errm)+" ")]),a("div",{staticClass:"inputcontainer"},[a("input",{attrs:{disabled:t.inwork,type:"submit",value:"Войти"}})])])},O=[],j={data:function(){return{errm:"",lg:"",pwd:"",inwork:!1}},watch:{lg:function(t){sessionStorage.setItem("login",t)}},mounted:function(){this.lg=sessionStorage.getItem("login")||""},methods:{logmein:function(){var t=this;this.inwork=!0;var e=this.pwd;this.errm="",this.pwd="",g("login",{login:this.lg,pass:e}).then((function(e){sessionStorage.setItem("tphash",e.token),window.location.hash="#/",t.inwork=!1})).catch((function(e){t.errm=e,t.inwork=!1}))}}},S=j,L=(a("c176"),Object(u["a"])(S,P,O,!1,null,"2b639ca0",null)),N=L.exports,q=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("Merchants",{on:{merchant:t.onMerchant}}),t.selected?a("MerchantParams",{attrs:{merchant:t.merchant},on:{save:t.saveMerchant}}):t._e()],1)},I=[],M=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"merchants"},[a("span",{staticClass:"actions"},[t._v("Корпорации")]),a("div",{staticClass:"actions"},[a("button",{staticClass:"action",attrs:{title:"Новая корпорация"},on:{click:t.newmerchant}},[a("plus",{staticClass:"plus"})],1),a("button",{staticClass:"action",class:{selected:t.showdeleted},attrs:{title:"Показывать удаленные"},on:{click:t.del}},[a("trash",{staticClass:"plus"})],1)]),a("div",{staticClass:"actions"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"actions",attrs:{type:"text",placeholder:"Поиск"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),a("button",{staticClass:"action small",on:{click:function(e){t.search=""}}},[t._v("x")])]),t._l(t.merchants,(function(e){return a("button",{key:e.id,staticClass:"merchant",class:{deactivated:0==e.enabled,deleted:1==e.deleted},on:{click:function(a){return t.$emit("merchant",e)}}},[t._v(" "+t._s(e.name)+" ")])}))],2)},R=[],T=(a("4de4"),a("4160"),a("c975"),a("b0c0"),a("ac1f"),a("841c"),a("159b"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"}},[a("defs"),a("title",[t._v("8.add")]),a("g",{attrs:{id:"_8.add","data-name":"8.add"}},[a("circle",{staticClass:"cls-1",attrs:{cx:"12",cy:"12",r:"11"}}),a("line",{staticClass:"cls-1",attrs:{x1:"12",y1:"6",x2:"12",y2:"18"}}),a("line",{staticClass:"cls-1",attrs:{x1:"18",y1:"12",x2:"6",y2:"12"}})])])}),D=[],H=(a("360b"),{}),B=Object(u["a"])(H,T,D,!1,null,"57a63a3a",null),A=B.exports,U=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("svg",{staticClass:"feather feather-trash-2",attrs:{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}},[a("polyline",{attrs:{points:"3 6 5 6 21 6"}}),a("path",{attrs:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}}),a("line",{attrs:{x1:"10",y1:"11",x2:"10",y2:"17"}}),a("line",{attrs:{x1:"14",y1:"11",x2:"14",y2:"17"}})])},V=[],J={},z=Object(u["a"])(J,U,V,!1,null,null,null),K=z.exports,F={data:function(){return{merchantsRef:[],showdeleted:!1,search:""}},computed:{merchants:function(){var t=this;return this.merchantsRef.filter((function(e){return""==t.search?(0==e.deleted||t.showdeleted)&&e.id>0:e.name.toLowerCase().indexOf(t.search.toLowerCase())>=0&&(0==e.deleted||t.showdeleted)&&e.id>0}))}},methods:{newmerchant:function(){var t={id:0,hash:"",name:"",paymentagent:"none",enabled:1,deleted:0,creator:0,dtcreate:new Date};this.merchantsRef.unshift(t),this.$emit("merchant",t)},del:function(){this.showdeleted=!this.showdeleted}},mounted:function(){var t=this;g("merchants").then((function(e){t.merchantsRef=e.data,e.data.forEach((function(e){sessionStorage.getItem("merchant")==e.id&&t.$emit("merchant",e)}))}))},components:{plus:A,trash:K}},G=F,Q=(a("e8e3"),Object(u["a"])(G,M,R,!1,null,"ef297b5e",null)),W=Q.exports,X=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"merchant",class:{deactivated:0==t.merchant.enabled,deleted:1==t.merchant.deleted}},[a("form",{staticClass:"merchant-data",on:{submit:function(e){return e.preventDefault(),t.save(e)}}},[a("span",{staticClass:"readonly"},[t._v(" id: "+t._s(t.merchant.id)+" ")]),a("span",{staticClass:"readonly"},[t._v(" merchant: "+t._s(t.merchant.hash)+" ")]),a("label",{attrs:{for:"name"}},[t._v("Название")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.merchant.name,expression:"merchant.name"}],attrs:{required:"",id:"name",type:"text",autocomplete:"off"},domProps:{value:t.merchant.name},on:{input:[function(e){e.target.composing||t.$set(t.merchant,"name",e.target.value)},function(e){return t.setEdited(!0)}]}}),a("label",{attrs:{for:"pags"}},[t._v("Платежный агент")]),a("PayAgentSelect",{staticClass:"input",attrs:{value:t.merchant.paymentagent,id:"pags"},on:{selected:t.onAgent}}),a("label",[t._v("Дополнительные свойства")]),t._l(t.params,(function(e,n){return a("div",{key:n,staticClass:"listed"},[a("label",{attrs:{for:n}},[t._v(" "+t._s(n)+" ")]),a("input",{attrs:{id:n,type:"text"},domProps:{value:e},on:{input:t.uparam}})])})),a("input",{staticStyle:{display:"none"},attrs:{type:"submit",id:"subs"}})],2),a("div",{staticClass:"actions"},[a("router-link",{staticClass:"input rtl code",attrs:{to:"/codegenerator/"+t.merchant.hash+"/"+t.merchant.name}},[t._v("Код для вставки")]),1==t.merchant.enabled?a("input",{attrs:{type:"button",value:"Деактивировать"},on:{click:t.enb}}):a("input",{attrs:{type:"button",value:"Активировать"},on:{click:t.enb}}),1==t.merchant.deleted?a("input",{attrs:{type:"button",value:"Восстановить"},on:{click:t.del}}):a("input",{attrs:{type:"button",value:"Удалить"},on:{click:t.del}}),a("router-link",{staticClass:"input rtl",attrs:{to:"/shops/"+t.merchant.id+"/"+t.merchant.name}},[t._v("Рестораны >")]),t.edited?a("input",{attrs:{type:"button",value:"Сохранить"},on:{click:t.trysave}}):t._e()],1)])},Y=[],Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("select",{on:{change:t.onChange}},t._l(t.agents,(function(e){return a("option",{key:e.id,attrs:{id:e.id},domProps:{value:e.code,selected:t.value==e.code}},[t._v(" "+t._s(e.name)+" ")])})),0)},tt=[],et={props:["value"],data:function(){return{agents:[]}},methods:{onChange:function(t){this.$emit("selected",t.target.value)}},mounted:function(){var t=this;g("payagents").then((function(e){t.agents=e.data}))}},at=et,nt=Object(u["a"])(at,Z,tt,!1,null,null,null),st=nt.exports,ot={data:function(){return{params:{},editing:{creator:0,deleted:0,dtcreate:"",enabled:1,hash:"",id:1,name:"",paymentagent:"none"},edited:!1}},props:["merchant"],methods:{enb:function(){this.merchant.enabled=1-this.merchant.enabled,this.setEdited(!0)},del:function(){this.merchant.deleted=1-this.merchant.deleted,this.setEdited(!0)},onAgent:function(t){this.merchant.paymentagent=t,this.setEdited(!0)},uparam:function(t){this.params[t.target.id]=t.target.value,this.setEdited(!0)},setEdited:function(t){this.edited=t||!0},save:function(){this.edited=!1,this.$emit("save",{was:this.editing,new:this.merchant,props:this.params})},trysave:function(){document.getElementById("subs").click()}},watch:{},components:{PayAgentSelect:st},mounted:function(){var t=this;Object.assign(this.editing,this.merchant),g("mparams?merchant="+this.merchant.id).then((function(e){t.params=e.data}))},beforeDestroy:function(){1==this.edited&&(Object.assign(this.merchant,this.editing),this.edited=!1)}},rt=ot,it=(a("4377"),Object(u["a"])(rt,X,Y,!1,null,"1d429300",null)),lt=it.exports,ct={name:"Home",data:function(){return{merchant:void 0,selected:!1}},methods:{onMerchant:function(t){var e=this;sessionStorage.setItem("merchant",t.id),this.selected=!1,setTimeout((function(){e.merchant=t,e.selected=!0}),100)},saveMerchant:function(t){var e=this,a={merchant:t.new,props:t.props};g("merchants",a).then((function(t){console.log(t),0==e.merchant.id&&(e.merchant.id=t.ident,e.merchant.hash=t.hash),e.selected=!1}))}},components:{Merchants:W,MerchantParams:lt}},ut=ct,dt=(a("1f06"),Object(u["a"])(ut,q,I,!1,null,"3b4774de",null)),ht=dt.exports,pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("Shops",{attrs:{merchant:t.$route.params.merchant,name:t.$route.params.name},on:{shop:t.onShop}}),t.selected?a("ShopParams",{attrs:{shop:t.shop},on:{save:t.saveShop}}):t._e()],1)},mt=[],ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"merchants"},[a("div",{staticClass:"actions"},[a("router-link",{staticClass:"action",attrs:{to:"/"}},[t._v("< Назад")])],1),a("span",{staticClass:"actions"},[t._v('Рестораны корпорации "'+t._s(t.name)+'" ')]),a("div",{staticClass:"actions"},[a("button",{staticClass:"action",attrs:{title:"Новый магазин"},on:{click:t.newshop}},[a("plus",{staticClass:"plus"})],1),a("button",{staticClass:"action",class:{selected:t.showdeleted},attrs:{title:"Показывать удаленные"},on:{click:t.del}},[a("trash",{staticClass:"plus"})],1)]),a("div",{staticClass:"actions"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"actions",attrs:{type:"text",placeholder:"Поиск"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),a("button",{staticClass:"action small",on:{click:function(e){t.search=""}}},[t._v("x")])]),t._l(t.shops,(function(e){return a("button",{key:e.id,staticClass:"merchant",class:{deactivated:0==e.enabled,deleted:1==e.deleted},on:{click:function(a){return t.$emit("shop",e)}}},[t._v(" "+t._s(e.name)+" ")])}))],2)},vt=[],gt={props:["merchant","name"],data:function(){return{shopsRef:[],showdeleted:!1,search:""}},computed:{shops:function(){var t=this;return this.shopsRef.filter((function(e){return""==t.search?(0==e.deleted||t.showdeleted)&&e.id>0:e.name.toLowerCase().indexOf(t.search.toLowerCase())>=0&&(0==e.deleted||t.showdeleted)&&e.id>0}))}},methods:{newshop:function(){var t={id:0,merchant:+this.merchant,name:"",address:"",description:"",dhurl:"",dhtoken:"",imagesurl:"",noimage:"",minimalsum:0,allowdlv:1,allowta:1,allowcash:1,allowcard:1,allowonline:1,enabled:1,deleted:0,creator:0,dtcreate:new Date};this.shopsRef.unshift(t),this.$emit("shop",t)},del:function(){this.showdeleted=!this.showdeleted}},mounted:function(){var t=this;g("shops?merchant="+this.merchant).then((function(e){t.shopsRef=e.data}))},components:{plus:A,trash:K}},bt=gt,wt=(a("34c8"),Object(u["a"])(bt,ft,vt,!1,null,"5df37a9e",null)),yt=wt.exports,_t=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"merchant",class:{deactivated:0==t.shop.enabled,deleted:1==t.shop.deleted}},[a("form",{staticClass:"merchant-data",on:{submit:function(e){return e.preventDefault(),t.save(e)}}},[a("span",{staticClass:"readonly"},[t._v(" id: "+t._s(t.shop.id)+" ")]),a("label",{attrs:{for:"name"}},[t._v("Название")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.shop.name,expression:"shop.name"}],attrs:{required:"",id:"name",type:"text",autocomplete:"off",placeholder:"Название ресторана"},domProps:{value:t.shop.name},on:{input:[function(e){e.target.composing||t.$set(t.shop,"name",e.target.value)},function(e){return t.setEdited(!0)}]}}),a("label",{attrs:{for:"address"}},[t._v("Адрес")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.shop.address,expression:"shop.address"}],attrs:{required:"",id:"address",type:"text",autocomplete:"off",placeholder:"Адрес ресторана"},domProps:{value:t.shop.address},on:{input:[function(e){e.target.composing||t.$set(t.shop,"address",e.target.value)},function(e){return t.setEdited(!0)}]}}),a("label",{attrs:{for:"desc"}},[t._v("Описание")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.shop.description,expression:"shop.description"}],attrs:{required:"",id:"desc",type:"text",autocomplete:"off",placeholder:"Краткое описание"},domProps:{value:t.shop.description},on:{input:[function(e){e.target.composing||t.$set(t.shop,"description",e.target.value)},function(e){return t.setEdited(!0)}]}}),a("label",{attrs:{for:"dhurl"}},[t._v("URL к DeliveryHatch")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.shop.dhurl,expression:"shop.dhurl"}],attrs:{required:"",id:"dhurl",type:"text",autocomplete:"off",placeholder:"IP адрес DeliveryHatch в ресторане"},domProps:{value:t.shop.dhurl},on:{input:[function(e){e.target.composing||t.$set(t.shop,"dhurl",e.target.value)},t.dhurl]}}),a("label",{attrs:{for:"dhtoken"}},[t._v("API Token DeliveryHatch")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.shop.dhtoken,expression:"shop.dhtoken"}],attrs:{required:"",id:"dhtoken",type:"text",autocomplete:"off",placeholder:"DeliveryHatch.ini > [APITOKEN]"},domProps:{value:t.shop.dhtoken},on:{input:[function(e){e.target.composing||t.$set(t.shop,"dhtoken",e.target.value)},function(e){return t.setEdited(!0)}]}}),a("label",{attrs:{for:"imagesurl"}},[t._v("URL к папке с картинками")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.shop.imagesurl,expression:"shop.imagesurl"}],attrs:{required:"",id:"imagesurl",type:"text",placeholder:"URL где расположены картинки для блюд",autocomplete:"off"},domProps:{value:t.shop.imagesurl},on:{input:[function(e){e.target.composing||t.$set(t.shop,"imagesurl",e.target.value)},function(e){return t.setEdited(!0)}]}}),a("label",{attrs:{for:"noimage"}},[t._v("URL к картинке-заглушке")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.shop.noimage,expression:"shop.noimage"}],attrs:{required:"",id:"noimage",type:"text",placeholder:"Запасная картинка для блюда",autocomplete:"off"},domProps:{value:t.shop.noimage},on:{input:[function(e){e.target.composing||t.$set(t.shop,"noimage",e.target.value)},function(e){return t.setEdited(!0)}]}}),a("label",{attrs:{for:"minimalsum"}},[t._v("Минимальная сумма заказа")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.shop.minimalsum,expression:"shop.minimalsum"}],attrs:{required:"",id:"minimalsum",min:"0",placeholder:"0 - нет ограничений",type:"number",autocomplete:"off"},domProps:{value:t.shop.minimalsum},on:{input:[function(e){e.target.composing||t.$set(t.shop,"minimalsum",e.target.value)},function(e){return t.setEdited(!0)}]}}),a("label",{attrs:{for:"allowdlv"}},[t._v("Разрешить заказы на доставку")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.shop.allowdlv,expression:"shop.allowdlv"}],attrs:{required:"",id:"allowdlv",min:"0",max:"1",type:"number",autocomplete:"off"},domProps:{value:t.shop.allowdlv},on:{input:[function(e){e.target.composing||t.$set(t.shop,"allowdlv",e.target.value)},function(e){return t.setEdited(!0)}]}}),a("label",{attrs:{for:"allowta"}},[t._v("Разрешить заказы на самовывоз")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.shop.allowta,expression:"shop.allowta"}],attrs:{required:"",id:"allowta",min:"0",max:"1",type:"number",autocomplete:"off"},domProps:{value:t.shop.allowta},on:{input:[function(e){e.target.composing||t.$set(t.shop,"allowta",e.target.value)},function(e){return t.setEdited(!0)}]}}),a("label",{attrs:{for:"allowcash"}},[t._v("Разрешить оплату наличными")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.shop.allowcash,expression:"shop.allowcash"}],attrs:{required:"",id:"allowcash",min:"0",max:"1",type:"number",autocomplete:"off"},domProps:{value:t.shop.allowcash},on:{input:[function(e){e.target.composing||t.$set(t.shop,"allowcash",e.target.value)},function(e){return t.setEdited(!0)}]}}),a("label",{attrs:{for:"allowcard"}},[t._v("Разрешить оплату картой")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.shop.allowcard,expression:"shop.allowcard"}],attrs:{required:"",id:"allowcard",min:"0",max:"1",type:"number",autocomplete:"off"},domProps:{value:t.shop.allowcard},on:{input:[function(e){e.target.composing||t.$set(t.shop,"allowcard",e.target.value)},function(e){return t.setEdited(!0)}]}}),a("label",{attrs:{for:"allowonline"}},[t._v("Разрешить оплату онлайн")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.shop.allowonline,expression:"shop.allowonline"}],attrs:{required:"",id:"allowonline",min:"0",max:"1",type:"number",autocomplete:"off"},domProps:{value:t.shop.allowonline},on:{input:[function(e){e.target.composing||t.$set(t.shop,"allowonline",e.target.value)},function(e){return t.setEdited(!0)}]}}),a("label",[t._v("Дополнительные свойства")]),t._l(t.params,(function(e,n){return a("div",{key:n,staticClass:"listed"},[a("label",{attrs:{for:n}},[t._v(" "+t._s(n)+" ")]),a("input",{attrs:{id:n,type:"text"},domProps:{value:e},on:{input:t.uparam}})])})),a("input",{staticStyle:{display:"none"},attrs:{type:"submit",id:"subs"}})],2),a("div",{staticClass:"actions"},[1==t.shop.enabled?a("input",{attrs:{type:"button",value:"Деактивировать"},on:{click:t.enb}}):a("input",{attrs:{type:"button",value:"Активировать"},on:{click:t.enb}}),1==t.shop.deleted?a("input",{attrs:{type:"button",value:"Восстановить"},on:{click:t.del}}):a("input",{attrs:{type:"button",value:"Удалить"},on:{click:t.del}}),t.edited?a("input",{attrs:{type:"button",value:"Сохранить"},on:{click:t.trysave}}):t._e()])])},xt=[],Ct=(a("466d"),{data:function(){return{params:{},editing:{},edited:!1}},props:["shop"],methods:{dhurl:function(){var t=this.shop.dhurl.match(/^(http:\/\/|https:\/\/)(\d{1,3}.\d{1,3}.\d{1,3}.\d{1,3}:\d{1,5})(\/api\/v2\/ext\/)$/);t&&4==t.length?document.getElementById("dhurl").setCustomValidity(""):document.getElementById("dhurl").setCustomValidity("Укажите адрес в формате http(s)://IP:PORT/api/v2/ext/"),this.setEdited(!0)},enb:function(){this.shop.enabled=1-this.shop.enabled,this.setEdited(!0)},del:function(){this.shop.deleted=1-this.shop.deleted,this.setEdited(!0)},onAgent:function(t){this.shop.paymentagent=t,this.setEdited(!0)},uparam:function(t){this.params[t.target.id]=t.target.value,this.setEdited(!0)},setEdited:function(t){this.edited=t||!0},save:function(){this.edited=!1,this.$emit("save",{was:this.editing,new:this.shop,props:this.params})},trysave:function(){document.getElementById("subs").click()}},watch:{},components:{},mounted:function(){var t=this;Object.assign(this.editing,this.shop),g("sparams?shop="+this.shop.id).then((function(e){t.params=e.data}))},beforeDestroy:function(){1==this.edited&&(Object.assign(this.shop,this.editing),this.edited=!1)}}),kt=Ct,$t=(a("fede"),Object(u["a"])(kt,_t,xt,!1,null,"a0d9a2f8",null)),Et=$t.exports,Pt={name:"Home",data:function(){return{shop:void 0,selected:!1}},methods:{onShop:function(t){var e=this;this.selected=!1,setTimeout((function(){e.shop=t,e.selected=!0}),100)},saveShop:function(t){var e=this,a={shop:t.new,props:t.props};g("shops",a).then((function(t){console.log(t),0==e.shop.id&&(e.shop.id=t.ident),e.selected=!1}))}},components:{Shops:yt,ShopParams:Et}},Ot=Pt,jt=(a("19ae"),Object(u["a"])(Ot,pt,mt,!1,null,"68b175ef",null)),St=jt.exports,Lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"codegenerator"},[a("h1",[t._v("Генератор кода")]),a("router-link",{staticClass:"action",attrs:{to:"/"}},[t._v("Назад")]),a("h2",[t._v(t._s(t.$route.params.name))]),a("label",{attrs:{for:"versions"}},[t._v("Выберите версию веб-приложения")]),a("div",{staticClass:"actions"},t._l(t.apps,(function(e){return a("input",{key:e,staticClass:"action",attrs:{type:"button",value:e},on:{click:function(a){return t.build(e)}}})})),0),""!=t.version?a("div",{staticClass:"gendata"},[a("h3",[t._v("HTML")]),a("span",[t._v("Вставьте HTML содержимое, приведенное ниже в страницу сайта")]),a("pre",{attrs:{id:"rawhtml"}},[t._v("      "+t._s(t.gendata.html)+"\n    ")]),a("hr"),a("h3",[t._v("iframe")]),a("span",[t._v("Вставьте HTML содержимое, приведенное ниже в страницу сайта")]),a("pre",{attrs:{id:"rawhtml"}},[t._v("      "+t._s(t.gendata.iframe)+"\n    ")]),a("hr"),a("h3",[t._v("Прямая ссылка (для iframe)")]),a("span",[t._v("Вставьте ссылку в src атрибут iframe на сайте")]),a("pre",{attrs:{id:"rawhtml"}},[t._v("      "+t._s(t.gendata.src)+"\n    ")]),a("hr"),a("h3",[t._v('Проверка "На лету"')]),a("iframe",{attrs:{src:t.gendata.src}})]):t._e()],1)},Nt=[],qt={data:function(){return{apps:[],version:"",gendata:{html:"",iframe:"",src:""}}},methods:{build:function(t){this.version=t,this.gendata.html='<link rel=stylesheet href="https://dev.carbis.ru/shopapp/'+this.version+'/style">\n<div id="minidelivery" merchant="'+this.$route.params.hash+'"></div>\n<script src="https://dev.carbis.ru/shopapp/'+this.version+'/vendor"><\/script>\n<script src="https://dev.carbis.ru/shopapp/'+this.version+'/app"><\/script>',this.gendata.iframe='<iframe src="https://dev.carbis.ru/shopapp/'+this.version+"/shop?merchant="+this.$route.params.hash+'"></iframe>',this.gendata.src="https://dev.carbis.ru/shopapp/"+this.version+"/shop?merchant="+this.$route.params.hash}},mounted:function(){var t=this;g("webapps").then((function(e){t.apps=e.data}))}},It=qt,Mt=(a("2c5c"),Object(u["a"])(It,Lt,Nt,!1,null,"09ff2953",null)),Rt=Mt.exports;n["a"].use(E["a"]);var Tt=[{path:"/",name:"Home",component:ht},{path:"/shops/:merchant/:name",name:"Shops",component:St},{path:"/codegenerator/:hash/:name",name:"Shops",component:Rt},{path:"/login",name:"LoginPage",meta:{layout:"login"},component:N}],Dt=new E["a"]({mode:"hash",base:"/",routes:Tt}),Ht=Dt;n["a"].config.productionTip=!1,new n["a"]({router:Ht,render:function(t){return t($)}}).$mount("#app")},"75a6":function(t,e,a){},"7f5e":function(t,e,a){},"85ec":function(t,e,a){},"882d":function(t,e,a){},"8fe5":function(t,e,a){},"9a6c":function(t,e,a){},acce:function(t,e,a){},b65f:function(t,e,a){},bd8d:function(t,e,a){"use strict";var n=a("9a6c"),s=a.n(n);s.a},c176:function(t,e,a){"use strict";var n=a("acce"),s=a.n(n);s.a},d679:function(t,e,a){},e8e3:function(t,e,a){"use strict";var n=a("b65f"),s=a.n(n);s.a},fede:function(t,e,a){"use strict";var n=a("48fa"),s=a.n(n);s.a}});
//# sourceMappingURL=app.697b81c1.js.map